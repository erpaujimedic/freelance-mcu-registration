<!DOCTYPE html>
<html>
<head>
  <title>Pendaftaran Freelance MCU</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef2f7;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h2 {
      text-align: center;
    }
    label {
      font-weight: bold;
    }
    select, input {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      width: 100%;
      background-color: #4CAF50;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    #nurseSubsection {
      display: none;
    }
  </style>
</head>
<body>

<h2>Pendaftaran Freelance MCU</h2>
<form id="mcuForm" enctype="multipart/form-data">
  <label for="name">Nama:</label>
  <input type="text" id="name" name="name" placeholder="Masukkan nama Anda" required>

  <label for="phone">Nomor WhatsApp:</label>
  <input type="text" id="phone" name="phone" placeholder="Masukkan nomor WA" required>

  <label for="city">Kota:</label>
  <input type="text" id="city" name="city" placeholder="Masukkan kota domisili" required>

  <label for="province">Provinsi:</label>
  <input type="text" id="province" name="province" placeholder="Masukkan provinsi domisili" required>

  <label for="position">Posisi:</label>
  <select id="position" name="position" required>
    <option value="">Pilih Posisi</option>
    <option value="Perawat">Perawat</option>
    <option value="Dokter">Dokter</option>
    <option value="Analis">Analis</option>
    <option value="Radiografer">Radiografer</option>
  </select>

  <div id="nurseSubsection">
    <label for="nurseSpecialty">Spesialisasi Perawat:</label>
    <select id="nurseSpecialty" name="nurseSpecialty">
      <option value="Audiometri">Audiometri</option>
      <option value="Spirometri">Spirometri</option>
      <option value="Visus Mata">Visus Mata</option>
      <option value="Tensi">Tensi</option>
      <option value="EKG">EKG</option>
      <option value="Treadmill">Treadmill</option>
    </select>
  </div>

  <label for="cv">Unggah CV (PDF, max 10MB):</label>
  <input type="file" id="cv" name="cv" accept="application/pdf" required>

  <button type="submit">Kirim</button>
</form>

<script>
// Menampilkan sub kategori untuk perawat
document.getElementById('position').addEventListener('change', function() {
  if (this.value === 'Perawat') {
    document.getElementById('nurseSubsection').style.display = 'block';
  } else {
    document.getElementById('nurseSubsection').style.display = 'none';
  }
});

// Fungsi pengiriman data form menggunakan fetch
document.getElementById('mcuForm').addEventListener('submit', function(e) {
  e.preventDefault();

  var formData = new FormData(e.target);
  var file = formData.get('cv');
  var reader = new FileReader();

  reader.onloadend = function() {
    var base64File = reader.result.split(',')[1];

    var data = {
      name: formData.get('name'),
      phone: formData.get('phone'),
      city: formData.get('city'),
      province: formData.get('province'),
      position: formData.get('position'),
      nurseSpecialty: formData.get('nurseSpecialty'),
      cv: base64File,
      cvMimeType: file.type
    };

    fetch('https://script.google.com/macros/s/AKfycbyLppqn9c-Xj6Rddckr-h3W4qm1N8yZy3EbBJPfBP2vlZLasfKoHrrQXdx1LU3E_ndo1g/exec', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'success') {
        alert('Formulir berhasil dikirim!');
      } else {
        alert('Terjadi kesalahan.');
      }
    })
    .catch(error => console.error('Error:', error));
  };

  reader.readAsDataURL(file);
});
</script>

</body>
</html>
