<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Database Freelance MCU</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f4f4f4;
    }
    
    h1 {
      text-align: center;
    }

    form {
      max-width: 600px;
      margin: auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #218838;
    }

    .optional {
      font-size: 12px;
      color: #555;
    }

    .hidden {
      display: none;
    }

    .wa-section {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
    }

    .wa-logo {
      width: 20px;
      margin-right: 5px;
      cursor: pointer;
    }

    .community-section {
      text-align: center;
      margin-top: 20px;
    }

    .community-link {
      color: #25D366;
      text-decoration: none;
      font-size: 16px;
    }

    .community-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Database Freelance MCU</h1>
  <form id="mcuForm">
    <label for="name">Nama Lengkap beserta Gelar:</label>
    <input type="text" id="name" name="name" required>

    <label for="phone">Nomor Telepon/WhatsApp:</label>
    <input type="tel" id="phone" name="phone" required>

    <label for="address">Alamat:</label>
    <textarea id="address" name="address" required></textarea>

    <!-- Kabupaten/Kota dan Provinsi akan tampil setelah mengisi alamat -->
    <div id="locationFields" class="hidden">
      <label for="city">Kabupaten/Kota:</label>
      <input type="text" id="city" name="city" required>

      <label for="province">Provinsi:</label>
      <input type="text" id="province" name="province" required>
    </div>

    <label for="position">Posisi:</label>
    <select id="position" name="position" required>
      <option value="">Pilih Posisi</option>
      <option value="Perawat">Perawat</option>
      <option value="Dokter">Dokter</option>
      <option value="Analis">Analis</option>
      <option value="Radiografer">Radiografer</option>
      <option value="Lainnya">Lainnya</option>
    </select>

    <!-- Sub Bagian Perawat akan muncul jika posisi 'Perawat' dipilih -->
    <div id="nurseOptions" class="hidden">
      <label>Sub Bagian Perawat:</label>
      <input type="checkbox" id="audiometri" name="nurseSub[]" value="Audiometri"> Audiometri<br>
      <input type="checkbox" id="spirometri" name="nurseSub[]" value="Spirometri"> Spirometri<br>
      <input type="checkbox" id="tensi" name="nurseSub[]" value="Tensi BB/TB"> Tensi BB/TB<br>
      <input type="checkbox" id="ekg" name="nurseSub[]" value="EKG"> EKG<br>
      <input type="checkbox" id="treadmill" name="nurseSub[]" value="Treadmill Test"> Treadmill Test<br>
      <input type="checkbox" id="steptest" name="nurseSub[]" value="Step Test"> Step Test<br>
      <input type="checkbox" id="visus" name="nurseSub[]" value="Visus Mata"> Visus Mata<br>
      <input type="text" id="otherSub" name="nurseSub[]" placeholder="Lainnya...">
    </div>

    <!-- Input "Lainnya" akan muncul jika posisi 'Lainnya' dipilih -->
    <div id="otherPositionField" class="hidden">
      <label for="otherPosition">Posisi Lainnya:</label>
      <input type="text" id="otherPosition" name="otherPosition">
    </div>

    <label for="ktp">Upload KTP (Opsional):</label>
    <input type="file" id="ktp" name="ktp">

    <label for="ijazah">Upload Ijazah Terakhir (Opsional):</label>
    <input type="file" id="ijazah" name="ijazah">

    <label for="str">Upload STR (Opsional):</label>
    <input type="file" id="str" name="str">

    <p class="optional">* Jika tidak mengunggah file, kirimkan file KTP, Ijazah Terakhir, atau STR melalui WhatsApp ke:</p>
    <div class="wa-section">
      <a href="https://wa.me/6285888181119" target="_blank">
        <img src="whatsapp-logo.png" alt="WhatsApp Logo" class="wa-logo"> Chat via WhatsApp
      </a>
    </div>

    <button type="submit">Submit</button>
  </form>

  <!-- Bagian Komunitas WhatsApp -->
  <div class="community-section">
    <p>Bergabung dengan Komunitas di WhatsApp:</p>
    <a href="https://chat.whatsapp.com/JnEktAMHGbQ7kNpvJrpUtF" class="community-link">Klik disini untuk bergabung</a>
  </div>

  <script>
    // Tampilkan input Kabupaten/Kota dan Provinsi setelah mengisi alamat
    document.getElementById('address').addEventListener('input', function() {
      if (this.value.trim() !== '') {
        document.getElementById('locationFields').classList.remove('hidden');
      } else {
        document.getElementById('locationFields').classList.add('hidden');
      }
    });

    // Tampilkan opsi Sub Bagian jika posisi Perawat dipilih, dan Lainnya jika posisi 'Lainnya' dipilih
    document.getElementById('position').addEventListener('change', function() {
      if (this.value === 'Perawat') {
        document.getElementById('nurseOptions').classList.remove('hidden');
        document.getElementById('otherPositionField').classList.add('hidden');
      } else if (this.value === 'Lainnya') {
        document.getElementById('nurseOptions').classList.add('hidden');
        document.getElementById('otherPositionField').classList.remove('hidden');
      } else {
        document.getElementById('nurseOptions').classList.add('hidden');
        document.getElementById('otherPositionField').classList.add('hidden');
      }
    });

    // Submit form
    <script>
  document.getElementById('mcuForm').addEventListener('submit', function(event) {
    event.preventDefault();  // Mencegah reload halaman

    var formData = new FormData(this);  // Ambil data dari form
    var entries = {};  // Menyimpan data form

    // Mengubah FormData ke format yang bisa dibaca
    formData.forEach(function(value, key){
      entries[key] = value;
    });

    // Mengirim data dengan URLSearchParams
    fetch('https://script.google.com/macros/s/AKfycbwSzi8NZb9vBL3a4dBlm6XYeNiHYUOlp3kDe8ucj41fb3IUoSTR7XJIrufGrGnHDEvd/exec', {
      method: 'POST',
      body: new URLSearchParams(entries)
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'Success') {
        alert('Data berhasil dikirim!');
      } else {
        alert('Terjadi kesalahan: ' + data.status);
      }
    })
    .catch(error => console.error('Error:', error));
  });
</script>
</body>
</html>
